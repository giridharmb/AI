%%{init: {'theme': 'default', 'themeVariables': { 'fontSize': '14px'}, 'flowchart': {'nodeSpacing': 50, 'rankSpacing': 50}}}%%

graph TB

    subgraph Enterprise["Enterprise Applications Layer"]
        A[Internal Apps]
        C[Custom UI]
        B[API Gateway]
        A --> B
        C --> B
    end
    
    subgraph Gemini["Gemini Integration Layer"]
        D[Request Handler]
        E[Prompt Engineering]
        F[Context Builder]
        G[Gemini Client]
        
        B --> D
        D --> E & F
        E --> G
        F --> G
    end
    
    subgraph Data["Data Sources"]
        H[APIs]
        I[Databases] 
        J[Document Store]
        
        H & I & J --> F
    end
    
    subgraph Security["Security & Compliance"]
        K[IAM]
        L[Data Governance]
        M[Audit Logging]
    end
    
    G --> K & L
    D --> M
    
    style Enterprise fill:#f0f0ff,stroke:#333
    style Gemini fill:#f0fff0,stroke:#333
    style Data fill:#fff0f0,stroke:#333
    style Security fill:#fffff0,stroke:#333